import{B as K}from"./BaseLayout-qpe1goZP.js";import{d as Q,x as W,r as s,E as X,y as Y,e as o,o as T,f as j,w as t,h as e,G as q,i as $,j as y,n as N,t as M,P,k as z}from"./index-BFEiEqzV.js";import{g as Z}from"./vue3-datatable-4DUKYgRc.js";import"./topBarUserProfile-DObMqA0B.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ee=z("p",{class:"small text-grey"},"* Set up standard items for the Equipment Checklist Form",-1),te=z("p",{class:"p3"},null,-1),le={__name:"ChecklistComponent",setup(F){const r=Q.useToast(),_=W(),d=s(!1),h=s(null),v=s(!1),f=s(!1),p=s(!1),x=s(!1),i=s(!1),g=s(!0);s(0);const c=s(null),G=n=>{n&&n.length>0?(x.value=!1,m.value.item=n[0].item):x.value=!0,c.value=n.map(l=>l.id)[0]},b=X({current_page:1,pagesize:10,sort_column:"id",sort_direction:"desc"}),B=s(null),L=s([{field:"id",title:"ID",isUnique:!0,type:"number",hide:!1},{field:"item",title:"Item"},{field:"created_at",title:"Created_at"},{field:"updated_at",title:"Updated_at"}])||[],m=s({item:""}),O=async()=>{i.value=!0;const{valid:n}=await d.value.validate();if(!n){i.value=!1;return}try{const l=await _.post("item/store",m.value);l.data&&l.data.success?(r.success("Successfully added"),w(),v.value=!1,d.value.reset()):l.data.exist?r.error("Item name exist"):r.error("Something went wrong")}catch(l){console.log(l)}finally{i.value=!1}},H=async()=>{i.value=!0;const{valid:n}=await d.value.validate();if(!n){i.value=!1;return}try{const l=await _.put("item/edit",{id:c.value,...m.value});l.data&&l.data.success?(r.success("Successfully updated"),w(),p.value=!1,d.value.reset()):l.data.exist?r.error("Item name exist"):r.error("Something went wrong")}catch(l){console.log(l)}finally{i.value=!1}},J=async()=>{i.value=!0;try{const n=await _.delete("item/delete",{params:{id:c.value}});n.data&&n.data.success?(r.success("Successfully deleted"),w(),f.value=!1,d.value.reset()):r.error("Something went wrong")}catch(n){console.log(n)}finally{i.value=!1}},w=async()=>{try{g.value=!0;const l=(await _.get("item")).data.item;B.value=l}catch(n){console.log(n)}g.value=!1};return Y(()=>{w()}),(n,l)=>{const V=o("v-col"),S=o("v-row"),u=o("v-btn"),k=o("v-divider"),I=o("v-text-field"),D=o("v-card-text"),C=o("v-spacer"),U=o("v-card-actions"),E=o("v-form"),A=o("v-card"),R=o("v-dialog");return T(),j(S,null,{default:t(()=>[e(V,null,{default:t(()=>[e(S,null,{default:t(()=>[e(V,null,{default:t(()=>[ee]),_:1})]),_:1}),e(S,{class:"pa-3"},{default:t(()=>[e(V,{lg:"8",md:"8",sm:"6",cols:"12"},{default:t(()=>[e(R,{width:"400",scrollable:"",modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=a=>v.value=a)},{activator:t(({props:a})=>[e(u,q({color:"primary",text:"Add",class:"text-none"},a),null,16)]),default:t(()=>[e(A,{title:"Checklist Item"},{default:t(()=>[e(E,{onSubmit:$(O,["prevent"]),ref_key:"form",ref:d},{default:t(()=>[e(k,{class:"mt-1"}),e(D,{class:"px-4"},{default:t(()=>[e(I,{modelValue:m.value.item,"onUpdate:modelValue":l[0]||(l[0]=a=>m.value.item=a),"single-line":"","prepend-inner-icon":"mdi-invoice-text-multiple",rules:[a=>!!a||"Required"],density:"compact",variant:"outlined",label:"Set Item",clearable:""},null,8,["modelValue","rules"])]),_:1}),e(k),e(U,null,{default:t(()=>[e(u,{text:"Close",prependIcon:"mdi-arrow-left",class:"text-none",onClick:l[1]||(l[1]=a=>v.value=!1)}),e(C),e(u,{type:"submit",color:"primary",prependIcon:"mdi-content-save-check-outline",class:"text-none",text:"Save",variant:"flat",loading:i.value},null,8,["loading"])]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),e(R,{width:"400",scrollable:"",modelValue:p.value,"onUpdate:modelValue":l[5]||(l[5]=a=>p.value=a)},{activator:t(({props:a})=>[e(u,q({color:"primary","prepend-icon":"mdi-file-edit-outline",text:"Edit",class:"text-none ml-2",variant:"tonal"},a),null,16)]),default:t(()=>[e(A,{title:"Checklist Item"},{default:t(()=>[e(E,{onSubmit:$(H,["prevent"]),ref_key:"form",ref:d},{default:t(()=>[e(k,{class:"mt-1"}),e(D,{class:"px-4"},{default:t(()=>[e(I,{modelValue:m.value.item,"onUpdate:modelValue":l[3]||(l[3]=a=>m.value.item=a),"single-line":"","prepend-inner-icon":"mdi-invoice-text-multiple",rules:[a=>!!a||"Required"],density:"compact",variant:"outlined",label:"Set Item",clearable:""},null,8,["modelValue","rules"])]),_:1}),e(k),e(U,null,{default:t(()=>[e(u,{text:"Close",prependIcon:"mdi-arrow-left",class:"text-none",onClick:l[4]||(l[4]=a=>p.value=!1)}),e(C),e(u,{type:"submit",color:"primary",prependIcon:"mdi-content-save-check-outline",class:"text-none",text:"Save",variant:"flat",loading:i.value},null,8,["loading"])]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),e(R,{width:"400",scrollable:"",modelValue:f.value,"onUpdate:modelValue":l[6]||(l[6]=a=>f.value=a)},{activator:t(({props:a})=>[e(u,q({color:"error",disabled:x.value,"prepend-icon":"mdi-delete-empty",text:"Delete",class:"text-none ml-2",variant:"plain"},a),null,16,["disabled"])]),default:t(({isActive:a})=>[e(A,{"prepend-icon":"mdi-trash-can",subtitle:"Delete"},{default:t(()=>[te,e(D,null,{default:t(()=>[y("Are you sure you want to delete?")]),_:1}),e(U,null,{default:t(()=>[e(u,{text:"Close",prependIcon:"mdi-arrow-left",class:"text-none",onClick:ae=>a.value=!1},null,8,["onClick"]),e(C),e(u,{color:"danger","prepend-icon":"mdi-shield-remove-outline",text:"Delete",class:"text-none ml-2",variant:"outlined",onClick:J,loading:i.value},null,8,["loading"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]),_:1}),e(C),e(V,{lg:"4",md:"4",sm:"6",cols:"12"},{default:t(()=>[e(I,{color:"primary",modelValue:b.search,"onUpdate:modelValue":l[7]||(l[7]=a=>b.search=a),clearable:"",density:"compact",label:"Search all fields",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(N(Z),{ref_key:"datatable",ref:h,rows:B.value,columns:N(L),loading:g.value,search:b.search,selectRowOnClick:!0,hasCheckbox:!0,sortable:!0,sortColumn:b.sort_column,sortDirection:b.sort_direction,skin:"bh-table-compact bh-table-bordered",class:"mt-5",onRowSelect:G},{created_at:t(a=>[y(M(P(a.value.created_at)),1)]),updated_at:t(a=>[y(M(P(a.value.updated_at)),1)]),_:1},8,["rows","columns","loading","search","sortColumn","sortDirection"])]),_:1})]),_:1})}}},de={__name:"ChecklistItem",setup(F){const r=s("one");return(_,d)=>{const h=o("v-icon"),v=o("v-tab"),f=o("v-tabs"),p=o("v-window-item"),x=o("v-window"),i=o("v-card-text"),g=o("v-card");return T(),j(K,null,{default:t(()=>[e(g,null,{default:t(()=>[e(f,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=c=>r.value=c),density:"compact",class:"border-b-sm"},{default:t(()=>[e(v,{value:"roles",class:"text-none",color:"primary"},{default:t(()=>[e(h,{class:"mr-2"},{default:t(()=>[y("mdi-note-check-outline")]),_:1}),y(" Standard Checklist Item")]),_:1})]),_:1},8,["modelValue"]),e(i,null,{default:t(()=>[e(x,{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=c=>r.value=c),disabled:!0},{default:t(()=>[e(p,{value:"roles"},{default:t(()=>[e(le,{class:"mt-3"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}};export{de as default};
