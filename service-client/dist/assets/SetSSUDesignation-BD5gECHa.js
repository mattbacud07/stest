import{B as J}from"./BaseLayout-De698axt.js";import{d as K,v as Q,r as n,D as W,x as X,e as o,o as j,f as z,w as l,h as e,E as R,i as $,j as S,m as E,t as M,N as T,k as Y}from"./index-C8ph-EQq.js";import{g as Z}from"./vue3-datatable-BuM4cnvr.js";/* empty css              */import"./topBarUserProfile-ExGO6QtX.js";import"./logout-D7B5usQQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ee=Y("p",{class:"p3"},null,-1),te={__name:"SSUCompoent",setup(L){const r=K.useToast(),_=Q(),d=n(!1),U=n(null),v=n(!1),f=n(!1),p=n(!1),g=n(!1),u=n(!1),b=n(!0);n(0);const i=n(null),O=s=>{s&&s.length>0?(g.value=!1,m.value.ssu=s[0].ssu):g.value=!0,i.value=s.map(t=>t.id)[0]},x=W({current_page:1,pagesize:10,sort_column:"id",sort_direction:"desc"}),q=n(null),P=n([{field:"id",title:"ID",isUnique:!0,type:"number",hide:!1},{field:"ssu",title:"SSU"},{field:"created_at",title:"Created_at"},{field:"updated_at",title:"Updated_at"}])||[],m=n({ssu:""}),F=async()=>{u.value=!0;const{valid:s}=await d.value.validate();if(!s){u.value=!1;return}try{const t=await _.post("ssu/store",m.value);t.data&&t.data.success?(r.success("Successfully added"),w(),v.value=!1,d.value.reset()):t.data.exist?r.error("SSU name exist"):r.error("Something went wrong")}catch(t){console.log(t)}finally{u.value=!1}},G=async()=>{u.value=!0;const{valid:s}=await d.value.validate();if(!s){u.value=!1;return}try{const t=await _.put("ssu/edit",{id:i.value,...m.value});t.data&&t.data.success?(r.success("Successfully updated"),w(),p.value=!1,d.value.reset()):t.data.exist?r.error("SSU name exist"):r.error("Something went wrong")}catch(t){console.log(t)}finally{u.value=!1}},H=async()=>{u.value=!0;try{const s=await _.delete("ssu/delete",{params:{id:i.value}});s.data&&s.data.success?(r.success("Successfully deleted"),w(),f.value=!1,d.value.reset()):r.error("Something went wrong")}catch(s){console.log(s)}finally{u.value=!1}},w=async()=>{try{b.value=!0;const t=(await _.get("ssu")).data.ssu;q.value=t}catch(s){console.log(s)}b.value=!1};return X(()=>{w()}),(s,t)=>{const c=o("v-btn"),y=o("v-divider"),C=o("v-text-field"),k=o("v-card-text"),V=o("v-spacer"),D=o("v-card-actions"),B=o("v-form"),h=o("v-card"),A=o("v-dialog"),I=o("v-col"),N=o("v-row");return j(),z(N,null,{default:l(()=>[e(I,null,{default:l(()=>[e(N,{class:"pa-3"},{default:l(()=>[e(I,{lg:"8",md:"8",sm:"6",cols:"12"},{default:l(()=>[e(A,{width:"400",scrollable:"",modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=a=>v.value=a)},{activator:l(({props:a})=>[e(c,R({color:"primary","prepend-icon":"mdi-plus",text:"Create",class:"text-none"},a),null,16)]),default:l(()=>[e(h,{title:"SSU"},{default:l(()=>[e(B,{onSubmit:$(F,["prevent"]),ref_key:"form",ref:d},{default:l(()=>[e(y,{class:"mt-1"}),e(k,{class:"px-4"},{default:l(()=>[e(C,{modelValue:m.value.ssu,"onUpdate:modelValue":t[0]||(t[0]=a=>m.value.ssu=a),"single-line":"","prepend-inner-icon":"mdi-badge-account-outline",rules:[a=>!!a||"Required"],density:"compact",variant:"outlined",label:"Set SSU",clearable:""},null,8,["modelValue","rules"])]),_:1}),e(y),e(D,null,{default:l(()=>[e(c,{text:"Close",prependIcon:"mdi-arrow-left",class:"text-none",onClick:t[1]||(t[1]=a=>v.value=!1)}),e(V),e(c,{type:"submit",color:"primary",prependIcon:"mdi-content-save-check-outline",class:"text-none",text:"Save",variant:"flat",loading:u.value},null,8,["loading"])]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),e(A,{width:"400",scrollable:"",modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=a=>p.value=a)},{activator:l(({props:a})=>[e(c,R({color:"primary","prepend-icon":"mdi-file-edit-outline",text:"Edit",class:"text-none ml-2",variant:"tonal"},a),null,16)]),default:l(()=>[e(h,{title:"SSU"},{default:l(()=>[e(B,{onSubmit:$(G,["prevent"]),ref_key:"form",ref:d},{default:l(()=>[e(y,{class:"mt-1"}),e(k,{class:"px-4"},{default:l(()=>[e(C,{modelValue:m.value.ssu,"onUpdate:modelValue":t[3]||(t[3]=a=>m.value.ssu=a),"single-line":"","prepend-inner-icon":"mdi-badge-account-outline",rules:[a=>!!a||"Required"],density:"compact",variant:"outlined",label:"Set SSU",clearable:""},null,8,["modelValue","rules"])]),_:1}),e(y),e(D,null,{default:l(()=>[e(c,{text:"Close",prependIcon:"mdi-arrow-left",class:"text-none",onClick:t[4]||(t[4]=a=>p.value=!1)}),e(V),e(c,{type:"submit",color:"primary",prependIcon:"mdi-content-save-check-outline",class:"text-none",text:"Save",variant:"flat",loading:u.value},null,8,["loading"])]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),e(A,{width:"400",scrollable:"",modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=a=>f.value=a)},{activator:l(({props:a})=>[e(c,R({color:"error",disabled:g.value,"prepend-icon":"mdi-delete-empty",text:"Delete",class:"text-none ml-2",variant:"plain"},a),null,16,["disabled"])]),default:l(({isActive:a})=>[e(h,{"prepend-icon":"mdi-trash-can",subtitle:"Delete"},{default:l(()=>[ee,e(k,null,{default:l(()=>[S("Are you sure you want to delete?")]),_:1}),e(D,null,{default:l(()=>[e(c,{text:"Close",prependIcon:"mdi-arrow-left",class:"text-none",onClick:le=>a.value=!1},null,8,["onClick"]),e(V),e(c,{color:"danger","prepend-icon":"mdi-shield-remove-outline",text:"Delete",class:"text-none ml-2",variant:"outlined",onClick:H,loading:u.value},null,8,["loading"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])]),_:1}),e(V),e(I,{lg:"4",md:"4",sm:"6",cols:"12"},{default:l(()=>[e(C,{color:"primary",modelValue:x.search,"onUpdate:modelValue":t[7]||(t[7]=a=>x.search=a),clearable:"",density:"compact",label:"Search all fields",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(E(Z),{ref_key:"datatable",ref:U,rows:q.value,columns:E(P),loading:b.value,search:x.search,selectRowOnClick:!0,hasCheckbox:!0,sortable:!0,sortColumn:x.sort_column,sortDirection:x.sort_direction,skin:"bh-table-compact bh-table-bordered",class:"mt-5",onRowSelect:O},{created_at:l(a=>[S(M(T(a.value.created_at)),1)]),updated_at:l(a=>[S(M(T(a.value.updated_at)),1)]),_:1},8,["rows","columns","loading","search","sortColumn","sortDirection"])]),_:1})]),_:1})}}},ce={__name:"SetSSUDesignation",setup(L){const r=n("one");return(_,d)=>{const U=o("v-icon"),v=o("v-tab"),f=o("v-tabs"),p=o("v-window-item"),g=o("v-window"),u=o("v-card-text"),b=o("v-card");return j(),z(J,null,{default:l(()=>[e(b,null,{default:l(()=>[e(f,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=i=>r.value=i),density:"compact",class:"border-b-sm"},{default:l(()=>[e(v,{value:"roles",class:"text-none",color:"primary"},{default:l(()=>[e(U,{class:"mr-2"},{default:l(()=>[S("mdi-account-file")]),_:1}),S(" Set SSU")]),_:1})]),_:1},8,["modelValue"]),e(u,null,{default:l(()=>[e(g,{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=i=>r.value=i),disabled:!0},{default:l(()=>[e(p,{value:"roles"},{default:l(()=>[e(te,{class:"mt-3"})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}};export{ce as default};
