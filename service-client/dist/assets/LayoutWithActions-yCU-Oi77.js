import{_ as ae,B as ne}from"./topBarUserProfile-tltSc7lJ.js";import{u as le,Y as se,r as m,v as re,g as ce,ad as R,J as ue,o as d,f as _,w as o,h as t,M as I,n as a,j as r,k as w,I as g,G as ie,p as de,z as pe,F as me,t as b,R as U,e as l,U as _e,aG as ve,aN as fe,N as ye,O as be}from"./index-Cz72bSYw.js";import{p as he}from"./permitted-DJ8Q4E2X.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $=h=>(ye("data-v-4b7a0a7e"),h=h(),be(),h),ge=$(()=>w("span",{style:{color:"#191970","font-weight":"700"}},"webApp",-1)),we=$(()=>w("span",{style:{color:"#191970","font-weight":"700"}},"App",-1)),xe={class:"mainWrapper"},Ce={__name:"LayoutWithActions",emits:["searchText"],setup(h,{emit:q}){const{can:x}=he(),C=le();se();const v=m(null),{width:u,mobile:Ve}=re(),F=m(null);ce().currentUserRole;const e=R("data"),S=R("refresh",null),L=R("column",null),k=m(e.btnDisable??!0),V=m(!1),f=m(!1),D=m(""),E=q,M=c=>{E("searchText",c.target.value)},T=()=>{typeof S=="function"&&S()},P=ue(()=>!!(e!=null&&e.deleteFunction&&typeof e.deleteFunction=="function")),W=async c=>{if(e!=null&&e.deleteFunction&&typeof e.deleteFunction=="function"){V.value=!0;try{await e.deleteFunction(),f.value=!1}catch(n){console.error("Error in deleteFunction:",n),toast.error("Failed to delete. Please try again.")}finally{V.value=!1}}},j=()=>{console.log(e==null?void 0:e.selectedId.value),console.log(e==null?void 0:e.routeView.value);const c={id:e==null?void 0:e.selectedId.value};C.push({name:e==null?void 0:e.routeView.value,params:c})},z=()=>{if(e!=null&&e.createRequest){const c={};e.work_type!==null&&e.work_type!==""&&(c.work_type=e.work_type),C.push({name:e.createRequest,params:c})}},G=()=>{if(e!=null&&e.editRequest){const c={id:e==null?void 0:e.selectedId.value};C.push({name:e.editRequest,params:c})}};return(c,n)=>{const J=l("v-app-bar-nav-icon"),O=l("v-app-bar-title"),B=l("v-spacer"),Y=l("v-app-bar"),H=l("v-navigation-drawer"),p=l("v-icon"),i=l("v-btn"),K=l("v-checkbox"),A=l("v-card"),Q=l("v-menu"),X=l("v-text-field"),Z=l("v-dialog"),ee=l("v-toolbar"),te=l("v-main"),oe=l("v-app");return d(),_(oe,{dense:""},{default:o(()=>[t(Y,null,{default:o(()=>[t(J,{color:"primary",onClick:n[0]||(n[0]=y=>v.value=!v.value)}),t(O,{style:I({display:a(u)<=426?"none":""})},{default:o(()=>[r("Service "),ge]),_:1},8,["style"]),w("p",{style:I({display:a(u)<=426?"block":"none"})},[r("service"),we],4),t(B),t(ae)]),_:1}),t(H,{modelValue:v.value,"onUpdate:modelValue":n[1]||(n[1]=y=>v.value=y)},{default:o(()=>[t(ne)]),_:1},8,["modelValue"]),t(te,null,{default:o(()=>[t(ee,{class:"fixed-toolbar border-b-sm",dense:"",color:"white",style:I({width:a(u)<1280||v.value===!1?"100%":"calc(100% - 256px)"})},{default:o(()=>{var y;return[a(u)>550?(d(),_(B,{key:0})):g("",!0),t(Q,{modelValue:F.value,"onUpdate:modelValue":n[2]||(n[2]=s=>F.value=s),"close-on-content-click":!1,location:"bottom"},{activator:o(({props:s})=>[t(i,ie({color:"primary",variant:"plain",icon:""},s,{class:"text-none"}),{default:o(()=>[t(p,null,{default:o(()=>[r("mdi-chevron-down")]),_:1})]),_:2},1040)]),default:o(()=>[t(A,{"min-width":"auto",class:"pr-3"},{default:o(()=>[(d(!0),de(me,null,pe(a(L),s=>(d(),_(K,{class:"columnChooserCheckBox",label:s.title,key:s.field,"model-value":!s.hide,onChange:N=>s.hide=!N.target.checked},null,8,["label","model-value","onChange"]))),128))]),_:1})]),_:1},8,["modelValue"]),t(X,{modelValue:D.value,"onUpdate:modelValue":n[3]||(n[3]=s=>D.value=s),onInput:M,"order-sm":"1",density:"compact",class:"ml-3",variant:"plain","prepend-inner-icon":"mdi-magnify",color:"primary",placeholder:"Search data"},null,8,["modelValue"]),t(i,{onClick:T,color:"lighten-3",variant:"text",class:"mr-1 text-none"},{default:o(()=>[t(p,{class:"mr-1"},{default:o(()=>[r("mdi-refresh")]),_:1}),r(" "+b(a(u)<768?"":" Refresh"),1)]),_:1}),P.value?(d(),_(i,{key:1,variant:"tonal",disabled:k.value,onClick:n[6]||(n[6]=s=>f.value=!0),color:"error",class:"text-none mr-1"},{default:o(()=>[t(p,null,{default:o(()=>[r("mdi-trash-can")]),_:1}),r(" "+b(a(u)<768?"":"Delete")+" ",1),t(Z,{modelValue:f.value,"onUpdate:modelValue":n[5]||(n[5]=s=>f.value=s),"max-width":"340"},{default:o(({isActive:s})=>[t(A,{"prepend-icon":"mdi-trash-can",text:"Are you sure you want to delete?",title:"Delete"},{actions:o(()=>[t(i,{class:"ml-auto text-none",text:"Cancel",onClick:n[4]||(n[4]=N=>f.value=!1)}),t(i,{onClick:W,variant:"flat",disabled:k.value,loading:V.value,color:"error",class:"text-none mr-1"},{default:o(()=>[r("Delete")]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["disabled"])):g("",!0),t(i,{onClick:j,variant:"tonal",disabled:k.value,color:"primary",class:"text-none mr-1"},{default:o(()=>[t(p,null,{default:o(()=>[r(" mdi-file-eye ")]),_:1}),r(" "+b(a(u)<768?"":"View"),1)]),_:1},8,["disabled"]),a(x)("edit",a(_e))||a(x)("edit",a(ve))||a(x)("edit",a(fe))?(d(),_(i,{key:2,onClick:G,color:"primary",variant:"tonal",class:"text-none mr-1",disabled:k.value},{default:o(()=>[t(p,null,{default:o(()=>[r("mdi-pencil")]),_:1}),r(" "+b(a(u)<768?"":" Edit"),1)]),_:1},8,["disabled"])):g("",!0),(y=a(e))!=null&&y.createRequest?(d(),_(i,{key:3,onClick:z,color:"primary",variant:"flat",class:"text-none"},{default:o(()=>[t(p,null,{default:o(()=>[r("mdi-plus")]),_:1}),r(" "+b(a(u)<768?"":"Create"),1)]),_:1})):g("",!0)]}),_:1},8,["style"]),w("div",xe,[U(c.$slots,"filter",{},void 0,!0),U(c.$slots,"default",{searchText:D.value},void 0,!0)])]),_:3})]),_:3})}}},Be=ke(Ce,[["__scopeId","data-v-4b7a0a7e"]]);export{Be as L};
