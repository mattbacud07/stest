import{d as de,s as ue,u as me,c as pe,v as _e,r as n,D as ve,x as fe,f as be,w as a,i as he,e as i,o as c,h as e,n as d,y as z,F as D,j as r,k as s,m as w,a4 as ye,I as ge,t as g,L as ke,M as Se}from"./index-C8ph-EQq.js";import"./main-Z0aCj2Rp.js";import{L as Ce}from"./LayoutSinglePage-CszXxlTG.js";import{g as xe}from"./vue3-datatable-BuM4cnvr.js";/* empty css              */import{d as we}from"./debounce-VX6vs7ks.js";import{_ as Ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./topBarUserProfile-ExGO6QtX.js";import"./logout-D7B5usQQ.js";const k=S=>(ke("data-v-28a0f523"),S=S(),Se(),S),Ie=k(()=>s("h5",{class:"p-3",style:{"font-weight":"500",color:"#191970"}},"EQUIPMENTS",-1)),qe={class:"table-responsive"},Re={class:"table table-sm table-bordered"},ze=k(()=>s("thead",{style:{background:"#afafaf2e"}},[s("tr",null,[s("th",{scope:"col"},"Item Code"),s("th",{scope:"col"},"Item Description"),s("th",{scope:"col"},"Serial Number"),s("th",{scope:"col"},"Remarks"),s("th",{scope:"col"})])],-1)),De={key:0},Me={key:1},Ee={colspan:"5",class:"text-center p-1",style:{opacity:".2"}},Ue=k(()=>s("br",null,null,-1)),Ne={class:"d-flex justify-content-center"},Be={class:"text-danger"},Le=k(()=>s("b",null,"List of Selected Row",-1)),Pe=k(()=>s("br",null,null,-1)),Te={key:0},$e={key:1,class:"small"},je={__name:"CreatePM",setup(S){const F=de.useToast(),{name:Fe,width:V}=ue(),A=me();pe();const M=_e(),O=n(null),E=n(!1);n(!1);const f=n(!1),Q=n(!1),b=n(!1),U=n([]),G=[{title:"Back",disabled:!1,href:"#",display:"block"},{title:"Create Maintenance",disabled:!0,href:"",display:"none"},{title:"",disabled:!0,href:"",display:"none"}],H=t=>{!t.disabled&&t.href&&A.push(t.href)},N=n(""),B=n({ruleEquipmentSerial:[t=>!!t||"Required"],institutionValue:[t=>!!t||"Required"]}),J=async()=>{b.value=!0;const{valid:t}=await E.value.validate();if(!t){F.error("Please ensure that required fields are not left blank"),b.value=!1;return}try{}catch{}finally{b.value=!1}},h=n(!0),L=n(0),P=n([{field:"id",title:"ID",isUnique:!0,type:"number",hide:!0},{field:"item_code",title:"Item Code"},{field:"description",title:"Item Description"},{field:"name",title:"Category"}])||[],K=P.value.map(t=>t.field),u=ve({current_page:1,pagesize:10,search:""}),T=n(null),p=n([]),W=t=>{p.value.push({id:t.id,item_code:t.item_code,description:t.description,equipmentSerial:"",equipmentRemark:""})},$=t=>{p.value.splice(t,1)},I=async()=>{try{h.value=!0;const o=(await M.get("master-data-equipments",{params:{...u,searchColumn:K}})).data.equipments;T.value=o.data,L.value=o.total}catch(t){console.log(t)}h.value=!1},X=async()=>{try{h.value=!0;const t=await M.get("get_institution");U.value=t.data.institutions.map(o=>({key:o.name,value:o.address,institutionId:o.id}))}catch(t){console.log(t)}h.value=!1},Y=we(I,300),Z=t=>{u.current_page=t.current_page,u.pagesize=t.pagesize,u.search=t.search,t.change_type==="search"?Y():I()},ee=()=>{te.value=V.value<550?12:6},te=n(6),ae=()=>{};return fe(()=>{I(),X(),ee()}),(t,o)=>{const m=i("v-icon"),le=i("v-breadcrumbs-item"),se=i("v-breadcrumbs"),y=i("v-col"),j=i("v-spacer"),C=i("v-btn"),oe=i("v-combobox"),q=i("v-row"),R=i("v-card"),x=i("v-text-field"),ne=i("v-divider"),re=i("v-overlay"),ie=i("v-container"),ce=i("v-form");return c(),be(ce,{onSubmit:he(J,["prevent"]),ref_key:"form",ref:E},{default:a(()=>[e(Ce,null,{topBarFixed:a(()=>[e(y,{lg:"6",md:"6",sm:"8",cols:"8"},{default:a(()=>[e(se,{class:"pt-7"},{default:a(()=>[(c(),d(D,null,z(G,(l,_)=>e(le,{key:_,class:ye({"custom-pointer":!l.disabled}),style:ge({display:w(V)<=768?l.display:""}),onClick:v=>H(l),disabled:l.disabled},{default:a(()=>[r(g(l.title)+" ",1),e(m,{class:"ml-1",icon:"mdi-chevron-right"})]),_:2},1032,["class","style","onClick","disabled"])),64))]),_:1})]),_:1}),e(j),e(y,{lg:"6",md:"6",sm:"4",cols:"4","align-self":"center",class:"d-flex justify-end"},{default:a(()=>[e(C,{disabled:b.value,onClick:ae,color:"primary",variant:"tonal",class:"text-none mr-2"},{default:a(()=>[r(" Cancel ")]),_:1},8,["disabled"]),e(C,{type:"submit",loading:b.value,disabled:Q.value,color:"primary",variant:"flat",class:"text-none btnSubmit"},{default:a(()=>[e(m,{class:"mr-2"},{default:a(()=>[r("mdi-note-plus-outline")]),_:1}),r(" Create ")]),_:1},8,["loading","disabled"])]),_:1})]),default:a(()=>[e(ie,{class:"container-form mt-10"},{default:a(()=>[e(R,null,{default:a(()=>[e(q,null,{default:a(()=>[e(y,{cols:"12",lg:"6",md:"6",sm:"6"},{default:a(()=>[e(oe,{color:"primary",modelValue:N.value,"onUpdate:modelValue":o[0]||(o[0]=l=>N.value=l),clearable:"",label:"Institution",density:"compact",items:U.value,variant:"outlined",itemValue:"value",itemTitle:"key",rules:B.value.institutionValue,"close-on-content-click":!1,"hide-details":""},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),e(R,{class:"mt-3 p-3",elevation:"0",style:{border:"1px dashed #191970"}},{default:a(()=>[e(q,null,{default:a(()=>[Ie,e(y,{cols:"12"},{default:a(()=>[s("div",qe,[s("table",Re,[ze,p.value.length>0?(c(),d("tbody",De,[(c(!0),d(D,null,z(p.value,(l,_)=>(c(),d("tr",{key:_},[s("td",null,[r(g(l.item_code)+" ",1),e(x,{class:"hideID"},{default:a(()=>[r(g(l.id),1)]),_:2},1024)]),s("td",null,g(l.description),1),s("td",null,[e(x,{clearable:"",density:"compact",variant:"plain",placeholder:"Serial number ....","w-100":"",modelValue:l.equipmentSerial,"onUpdate:modelValue":v=>l.equipmentSerial=v,rules:B.value.ruleEquipmentSerial},null,8,["modelValue","onUpdate:modelValue","rules"])]),s("td",null,[e(x,{clearable:"",density:"compact",variant:"plain",placeholder:"Remarks...","w-100":"",modelValue:l.equipmentRemark,"onUpdate:modelValue":v=>l.equipmentRemark=v},null,8,["modelValue","onUpdate:modelValue"])]),s("td",null,[e(m,{onClick:v=>$(_),class:"text-danger"},{default:a(()=>[r("mdi-trash-can-outline")]),_:2},1032,["onClick"])])]))),128))])):(c(),d("tbody",Me,[s("tr",null,[s("td",Ee,[e(m,{class:"mb-3",style:{"font-size":"50px"}},{default:a(()=>[r("mdi-file-document-alert-outline")]),_:1}),Ue,r(" No records found ")])])]))])]),s("div",Ne,[e(C,{color:"primary",size:"medium",flat:"",class:"text-none mt-3 p-2",onClick:o[1]||(o[1]=l=>f.value=!f.value)},{default:a(()=>[e(m,{class:"mr-3"},{default:a(()=>[r("mdi-database-cog")]),_:1}),r(" Select Equipment & Peripherals ")]),_:1}),e(re,{modelValue:f.value,"onUpdate:modelValue":o[4]||(o[4]=l=>f.value=l),class:"d-flex align-items-center justify-content-center",width:w(V)<=600?400:600,"location-strategy":"connected"},{default:a(()=>[e(R,{class:"pa-7","min-height":"500"},{default:a(()=>[e(q,null,{default:a(()=>[e(y,{cols:"10",xl:"4",md:"4",sm:"5"},{default:a(()=>[e(x,{modelValue:u.search,"onUpdate:modelValue":o[2]||(o[2]=l=>u.search=l),clearable:"",density:"compact",label:"Search all fields",variant:"outlined",color:"primary"},null,8,["modelValue"])]),_:1}),e(j),e(C,{onClick:o[3]||(o[3]=l=>f.value=!1),icon:"",variant:"plain",color:"primary"},{default:a(()=>[e(m,null,{default:a(()=>[r("mdi-close")]),_:1})]),_:1})]),_:1}),e(w(xe),{ref_key:"datatable",ref:O,rows:T.value,columns:w(P),loading:h.value,selectRowOnClick:!0,sortable:!0,search:u.search,isServerMode:!0,totalRows:L.value,pageSize:u.pagesize,hide:!0,filter:!0,skin:"bh-table-compact bh-table-bordered bh-table-responsive",class:"",onRowClick:W,onChange:Z},null,8,["rows","columns","loading","search","totalRows","pageSize"]),e(ne),s("p",Be,[Le,Pe,p.value.length>0?(c(),d("span",Te,[(c(!0),d(D,null,z(p.value,(l,_)=>(c(),d("span",{key:l.id},[r(" [ "+g(l.item_code)+" - ",1),e(m,{onClick:v=>$(_),class:"text-danger"},{default:a(()=>[r("mdi-trash-can-outline")]),_:2},1032,["onClick"]),r("] Â  ")]))),128))])):(c(),d("span",$e,"No data selected"))])]),_:1})]),_:1},8,["modelValue","width"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)}}},Ye=Ve(je,[["__scopeId","data-v-28a0f523"]]);export{Ye as default};
