import{ap as ce,J as T,aI as ie,b0 as de,P as K,e as _,o,f as $,w as a,h as t,k as e,t as m,n as p,I as j,p as f,F as X,z as Y,j as i,Q as ke,r as C,x as ue,y as _e,v as xe,C as Ve,E as $e,G as Se}from"./index-BVXPU9zS.js";import{l as we}from"./lodash-CwzxlBFL.js";import{g as me}from"./vue3-datatable-C2ljW4qF.js";const Ce=e("p",null,"Delegated to",-1),De={class:"text-grey-darken-1"},Re=e("p",null,"Date of delegation",-1),Ne={class:"text-grey-darken-1"},Ue=e("p",null,[i("Date Accepted "),e("span",{class:"small text-disabled"},"(yyyy-mm-dd)")],-1),qe={class:"text-grey-darken-1"},Ie=e("p",null,[i("In Transit "),e("span",{class:"small text-disabled"},"(yyyy-mm-dd)")],-1),Te={class:"text-grey-darken-1"},Ae=e("p",null,"Travel Duration",-1),Pe={class:"text-grey-darken-1"},Me=e("p",null,[i("Start date "),e("span",{class:"small text-disabled"},"(yyyy-mm-dd)")],-1),Fe={class:"text-grey-darken-1"},je=e("p",null,[i("End date "),e("span",{class:"small text-disabled"},"(yyyy-mm-dd)")],-1),Oe={class:"text-grey-darken-1"},ze=e("p",{class:"font-weight-bold"},"History logs: ",-1),Ee=e("i",{class:"text-small text-disabled subtitle"}," (Click to show details per log)",-1),Je={class:"d-flex justify-content-between"},Le=e("b",{class:"bg-grey-lighten-3 pa-1 rounded"},"Servicing Activities:",-1),Be=e("b",{class:"bg-grey-lighten-3 pa-1 rounded"},"Actions Taken:",-1),He=e("b",{class:"bg-grey-lighten-3 pa-1 rounded"},"Spareparts Used:",-1),Qe=e("b",{class:"bg-grey-lighten-3 pa-1 rounded"},"Items Acquired:",-1),We=e("p",null,"Assigned to:",-1),Ge={class:"mt-2"},Ke={class:"text-grey"},Xe={key:0,class:"mb-3 mt-4"},Ye=e("p",{class:"text-primary font-weight-medium"},"Remarks:",-1),Ze={class:"text-remarks"},et={key:1,class:"mb-3 mt-4"},tt=e("p",null,[e("b",null,"Status after service:")],-1),at={class:"text-remarks"},lt={class:"mt-3"},st=e("p",{class:"text-center text-grey"},"No history logs found",-1),ta={__name:"InternalServicingActivity",props:{internalData:{type:Object,default:()=>({})}},setup(D){const A=D,{internalData:S}=ce(A),V=T(()=>{var v;return((v=S.value)==null?void 0:v.task_delegation)||{}}),I=T(()=>{var v;return(v=S.value)==null?void 0:v.task_delegation_all}),O=v=>T(()=>K(V.value[v])||"---"),E=T(()=>{var v,n;return((v=V.value)==null?void 0:v.type)===ie||((n=V.value)==null?void 0:n.type)===de}),Z=O("created_at"),P=O("acted_at"),s=T(()=>{var n,r,g;const v=(g=(r=(n=V.value)==null?void 0:n.task_activity)==null?void 0:r.find(R=>R.status==="In Transit"))==null?void 0:g.acted_at;return K(v)}),M=T(()=>{var n,r,g;const v=(g=(r=(n=V.value)==null?void 0:n.task_activity)==null?void 0:r.find(R=>R.status==="Started"))==null?void 0:g.acted_at;return K(v)}),z=T(()=>{var n,r,g;const v=(g=(r=(n=V.value)==null?void 0:n.task_activity)==null?void 0:r.find(R=>R.status==="Ended"))==null?void 0:g.acted_at;return K(v)});return(v,n)=>{const r=_("v-col"),g=_("v-row"),R=_("v-divider"),ee=_("v-btn"),J=_("v-card"),N=_("v-dialog"),L=_("v-icon"),B=_("v-chip");return o(),$(J,{class:"pa-3"},{default:a(()=>[t(g,null,{default:a(()=>[t(r,{cols:"12",lg:"4",md:"4",sm:"6"},{default:a(()=>{var U,h;return[Ce,e("p",De,m(((U=V.value)==null?void 0:U.first_name)??"--")+" "+m(((h=V.value)==null?void 0:h.last_name)??"--"),1)]}),_:1}),t(r,{cols:"12",lg:"4",md:"4",sm:"6"},{default:a(()=>[Re,e("p",Ne,m(p(Z)??"---"),1)]),_:1})]),_:1}),t(g,null,{default:a(()=>[t(r,{cols:"12",lg:"4",md:"4",sm:"6"},{default:a(()=>[Ue,e("p",qe,m(p(P)??"---"),1)]),_:1}),E.value?(o(),$(r,{key:0,cols:"12",lg:"4",md:"4",sm:"6"},{default:a(()=>[Ie,e("p",Te,m(s.value??"---"),1)]),_:1})):j("",!0),E.value?(o(),$(r,{key:1,cols:"12",lg:"4",md:"4",sm:"6"},{default:a(()=>{var U;return[Ae,e("p",Pe,m(((U=V.value)==null?void 0:U.travel_duration)??"---"),1)]}),_:1})):j("",!0),t(r,{cols:"12",lg:"4",md:"4",sm:"6"},{default:a(()=>[Me,e("p",Fe,m(M.value??"---"),1)]),_:1}),t(r,{cols:"12",lg:"4",md:"4",sm:"6"},{default:a(()=>[je,e("p",Oe,m(z.value??"---"),1)]),_:1})]),_:1}),t(R,{class:"mt-7 mb-7"}),t(g,{class:"mt-5"},{default:a(()=>[ze,Ee,t(r,{cols:"12",lg:"12",md:"12",sm:"12"},{default:a(()=>{var U;return[((U=I.value)==null?void 0:U.length)>0?(o(!0),f(X,{key:0},Y(I.value,(h,se)=>(o(),$(J,{elevation:"0",class:"mt-3",key:se},{default:a(()=>[e("div",Je,[t(N,{activator:"parent","max-width":"800",scrollable:""},{default:a(({isActive:te})=>[t(J,{class:"pl-4 pr-4 pt-3"},{actions:a(()=>[t(ee,{class:"ml-auto position-fixed bottom-0",text:"Close",onClick:H=>te.value=!1},null,8,["onClick"])]),default:a(()=>{var H,ae,Q,le;return[e("div",null,[e("pre",null,[Le,i(" "+m(JSON.stringify((H=h.task_activity)==null?void 0:H.map(q=>({status:q.status,acted_at:ke(q.acted_at)})),null,2)),1)])]),e("div",null,[e("pre",null,[Be,i(" "+m(JSON.stringify((ae=h.actions_taken)==null?void 0:ae.map(({action:q})=>({action:q})),null,2)),1)])]),e("div",null,[e("pre",null,[He,i(" "+m(JSON.stringify((Q=h.spareparts)==null?void 0:Q.map(({item_id:q,qty:u,dr:l,si:w,remarks:b})=>({item_id:q,qty:u,dr:l,si:w,remarks:b})),null,2)),1)])]),e("div",null,[e("pre",null,[Qe,i(" "+m(JSON.stringify((le=h.items_acquired)==null?void 0:le.map(({item:q,qty:u,remarks:l})=>({item:q,qty:u,remarks:l})),null,2)),1)])])]}),_:2},1024)]),_:2},1024),e("div",null,[We,e("div",Ge,[e("strong",Ke,[t(L,{class:"small text-disabled"},{default:a(()=>[i("mdi-account")]),_:1}),i(" "+m(h.assigned_to),1)]),h.remarks?(o(),f("div",Xe,[Ye,e("p",Ze,m(h.remarks),1)])):j("",!0),h.status_after_service?(o(),f("div",et,[tt,e("p",at,m(h.status_after_service),1)])):j("",!0),e("div",lt,[t(B,{color:"primary",size:"small",variant:"flat",label:""},{default:a(()=>[t(L,{icon:"mdi-chevron-right"}),i("   "+m(h==null?void 0:h.status),1)]),_:2},1024)])])]),e("div",null,[e("p",null,m(K(h.created_at)),1)])]),I.value.length>1?(o(),$(R,{key:0})):j("",!0)]),_:2},1024))),128)):(o(),$(g,{key:1,class:"mt-1"},{default:a(()=>[st]),_:1}))]}),_:1})]),_:1})]),_:1})}}},ot=e("p",{class:"mb-3"},[e("b",{class:"text-grey"},"Actions Taken")],-1),nt={class:"mt-3"},rt={key:1},ct=e("span",{class:"mt-3"},"--- ",-1),it=[ct],dt=e("p",{class:"mb-3"},[e("b",{class:"text-grey"},"Status after service")],-1),ut={key:1},_t=e("p",{class:"mb-3"},[e("b",{class:"text-grey"},"Customer Complaint")],-1),mt={key:0,class:"textHTML"},pt={key:1},ft=e("p",{class:"mb-3"},[e("b",{class:"text-grey"},"Cause of Problem")],-1),vt={key:0,class:"textHTML"},yt={key:1},ht=e("p",{class:"mb-3"},[e("b",{class:"text-grey"},"Remarks")],-1),gt={key:0,class:"textHTML"},bt={key:1},kt=e("p",{class:"mb-3"},[e("b",{class:"text-grey"},"Reagents / Spare Parts Used")],-1),xt={class:"mt-3"},Vt=e("span",{class:"text-grey"},"No records found",-1),aa={__name:"ServiceReportData",props:{task_delegation:{type:Object,default:()=>({})},actions_taken:{type:Array,default:()=>[]},spareparts:{type:Array,default:()=>[]}},setup(D){const A=D,{task_delegation:S,actions_taken:V,spareparts:I}=ce(A),O=C([{field:"id",title:"ID",isUnique:!0,type:"number",hide:!0},{field:"equipment.item_code",title:"Item Code"},{field:"equipment.description",title:"Item Description"},{field:"qty",title:"Qty"},{field:"dr",title:"DR no."},{field:"si",title:"SI no."},{field:"remarks",title:"Remarks"}])||[];return(E,Z)=>{const P=_("v-icon"),s=_("v-col"),M=_("v-chip"),z=_("v-row"),v=_("v-card");return o(),$(z,null,{default:a(()=>[t(s,{cols:"12"},{default:a(()=>{var n;return[ot,((n=p(V))==null?void 0:n.length)>0?(o(!0),f(X,{key:0},Y(p(V),r=>(o(),f("p",{key:r},[e("span",nt,[t(P,{color:"primary"},{default:a(()=>[i("mdi-check")]),_:1}),i(" "+m(r.action),1)])]))),128)):(o(),f("p",rt,it))]}),_:1}),t(s,{cols:"12"},{default:a(()=>{var n;return[dt,(n=p(S))!=null&&n.status_after_service?(o(),$(M,{key:0,label:"",density:"comfortable",color:"primary",variant:"tonal"},{default:a(()=>{var r;return[i(m((r=p(S))==null?void 0:r.status_after_service),1)]}),_:1})):(o(),f("p",ut,"---"))]}),_:1}),t(s,{cols:"12"},{default:a(()=>[t(z,null,{default:a(()=>[t(s,{cols:"12",md:"6",lg:"6",sm:"6"},{default:a(()=>{var n,r;return[_t,(n=p(S))!=null&&n.complaint?(o(),f("p",mt,m((r=p(S))==null?void 0:r.complaint),1)):(o(),f("p",pt,"---"))]}),_:1}),t(s,{cols:"12",md:"6",lg:"6",sm:"6"},{default:a(()=>{var n,r;return[ft,(n=p(S))!=null&&n.problem?(o(),f("p",vt,m((r=p(S))==null?void 0:r.problem),1)):(o(),f("p",yt,"---"))]}),_:1})]),_:1})]),_:1}),t(s,{cols:"12"},{default:a(()=>{var n,r;return[ht,(n=p(S))!=null&&n.sr_remarks?(o(),f("p",gt,m((r=p(S))==null?void 0:r.sr_remarks),1)):(o(),f("p",bt,"---"))]}),_:1}),t(s,{cols:"12"},{default:a(()=>{var n;return[kt,((n=p(I))==null?void 0:n.length)>0?(o(),$(v,{key:0,class:"mt-5"},{default:a(()=>[t(p(me),{rows:p(I),columns:p(O),pagination:!1,skin:"bh-table-compact bh-table-bordered bh-table-striped bh-table-hover"},null,8,["rows","columns"])]),_:1})):(o(),$(v,{key:1},{default:a(()=>[e("span",xt,[t(P,{color:"grey"},{default:a(()=>[i("mdi-text-box-search-outline")]),_:1}),i(),Vt])]),_:1}))]}),_:1})]),_:1})}}},$t=ue(),re=C([]),St=async()=>{try{const D=await $t.get("getStandardActions");D.data&&D.data.actions&&(re.value=D.data.actions.map(A=>A.actions))}catch(D){console.error("Failed to fetch standard actions:",D)}},wt=()=>(_e(()=>{re.value.length||St()}),{actions_data:re}),Ct={class:"text-center text-grey"},Dt=e("b",{class:"text-primary"}," Status after service",-1),Rt=e("p",{class:"text-primary"},"Customer Complaint",-1),Nt=e("p",{class:"text-primary"},"Cause of Problem",-1),Ut=e("b",{class:"text-primary"},"Remarks and Recommendation",-1),qt=e("b",{class:"text-primary"},"Actions Taken",-1),It=e("p",null,"No records found",-1),Tt=e("h5",{class:"text-primary"},"Reagents / Spare Parts Used",-1),At={class:"table-responsive"},Pt={class:"table table-sm table-bordered table-responsive"},Mt=e("thead",{style:{background:"#afafaf2e"}},[e("tr",null,[e("th",{scope:"col"},"Item Code"),e("th",{scope:"col"},"Item Description"),e("th",null,"Qty"),e("th",null,"DR#"),e("th",null,"SI#"),e("th",null,"Remarks"),e("th")])],-1),Ft={key:0},jt={key:1},Ot={colspan:"7",class:"text-center p-3",style:{opacity:".3"}},zt=e("br",null,null,-1),Et={class:"d-flex justify-content-start"},Jt={class:"text-danger"},Lt=e("b",null,"List of Selected Row",-1),Bt=e("br",null,null,-1),Ht={key:0},Qt={key:1,class:"small"},Wt=e("h5",{class:"text-primary"},"Customer Details",-1),Gt={class:"small text-disabled"},Kt={key:0,class:"text-success"},Xt=e("p",{class:"small text-danger"},"Dont forget to save before submitting",-1),la={__name:"ServiceReportForm",props:{modelValue:Object,type:{type:String,default:""}},emits:["update:modelValue"],setup(D,{expose:A,emit:S}){const{actions_data:V}=wt(),{width:I}=xe(),O=ue(),E=D,Z=S,{type:P}=ce(E),s=C({status_after_service:"",fields:[],spareparts:[],remarks:"",complaint:"",problem:"",name:"",designation:"",signature:null});Ve(s,u=>{Z("update:modelValue",u)},{deep:!0});const M=C(null),z=()=>{const{isEmpty:u,data:l}=M.value.saveSignature();u&&alert("No signature to save"),s.value.signature=l},v=()=>{M.value.clearSignature(),s.value.signature=null},n=C(!1);C([]);const r=C(!1),g=C(!1),R=C(0),ee=C([{field:"id",title:"ID",isUnique:!0,type:"number",hide:!0},{field:"item_code",title:"Item Code"},{field:"description",title:"Item Description"},{field:"name",title:"Category"}])||[],J=ee.value.map(u=>u.field),N=$e({current_page:1,pagesize:10,search:""}),L=C(null),B=async()=>{var u;try{g.value=!0;const l=await O.get("master-data-equipments",{params:{...N,searchColumn:J,item_category:[5,6]}}),w=(u=l==null?void 0:l.data)==null?void 0:u.equipments;L.value=w.data,R.value=w.total}catch(l){console.log(l)}g.value=!1},U=we.debounce(B,300),h=u=>{N.current_page=u.current_page,N.pagesize=u.pagesize,N.search=u.search,u.change_type==="search"?U():B()},se=u=>{var l;(l=s.value.spareparts)==null||l.push({item_id:u.id,item_code:u.item_code,description:u.description,qty:null,dr:null,si:null,remarks:null})},te=u=>{var l;(l=s.value.spareparts)==null||l.splice(u,1)},H=()=>{s.value.fields.length<8&&s.value.fields.push({action:""})},ae=u=>{s.value.fields.splice(u,1)},Q=C(!1),le=async()=>{const{valid:u}=await Q.value.validate();return u},q=T(()=>I.value<=400?300:I.value<=728?400:800);return A({validateServiceForm:le}),_e(()=>{B()}),(u,l)=>{const w=_("v-icon"),b=_("v-row"),oe=_("v-radio"),pe=_("v-radio-group"),k=_("v-col"),ne=_("v-textarea"),W=_("v-card"),G=_("v-btn"),fe=_("v-combobox"),F=_("v-text-field"),ve=_("v-spacer"),ye=_("v-divider"),he=_("v-overlay"),ge=_("VueSignaturePad"),be=_("v-form");return o(),$(be,{ref_key:"serviceForm",ref:Q},{default:a(()=>[t(W,{density:"compact",class:"pa-7",elevation:"1"},{default:a(()=>[t(b,null,{default:a(()=>[e("h4",Ct,[t(w,null,{default:a(()=>[i("mdi-chart-bar-stacked")]),_:1}),i(" Service Report")])]),_:1}),t(b,null,{default:a(()=>[t(k,{cols:"12"},{default:a(()=>[Dt,t(pe,{modelValue:s.value.status_after_service,"onUpdate:modelValue":l[0]||(l[0]=c=>s.value.status_after_service=c),rules:[c=>!!c||"Required"],inline:""},{default:a(()=>[t(oe,{label:"Operational",value:"Operational"}),t(oe,{label:"For further monitoring",value:"Further Monitoring"}),t(oe,{label:"Non-operational",value:"Non-Operational"})]),_:1},8,["modelValue","rules"])]),_:1})]),_:1}),t(b,null,{default:a(()=>[t(k,{cols:"12",md:"6",sm:"6",lg:"6"},{default:a(()=>[Rt,t(ne,{modelValue:s.value.complaint,"onUpdate:modelValue":l[1]||(l[1]=c=>s.value.complaint=c),color:"primary",variant:"outlined",placeholder:"Type here ...",rows:"3",counter:"80",rules:[c=>c.length<=80||"Please limit your input to 80 characters"]},null,8,["modelValue","rules"])]),_:1}),t(k,{cols:"12",md:"6",sm:"6",lg:"6"},{default:a(()=>[Nt,t(ne,{modelValue:s.value.problem,"onUpdate:modelValue":l[2]||(l[2]=c=>s.value.problem=c),color:"primary",variant:"outlined",placeholder:"Type here ...",rows:"3",counter:"80",rules:[c=>c.length<=80||"Please limit your input to 80 characters"]},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(b,null,{default:a(()=>[t(k,{cols:"12"},{default:a(()=>[Ut,t(ne,{modelValue:s.value.remarks,"onUpdate:modelValue":l[3]||(l[3]=c=>s.value.remarks=c),color:"primary",variant:"outlined",placeholder:"Type your remarks & recommendations here ...",rows:"3",counter:"120",rules:[c=>c.length<=120||"Please limit your input to 120 characters"]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),t(W,{density:"compact",class:"pa-7 mt-5",elevation:"0"},{default:a(()=>[t(b,null,{default:a(()=>[t(k,{cols:"12"},{default:a(()=>[t(b,null,{default:a(()=>[t(k,{class:"d-flex justify-content-between align-items-center"},{default:a(()=>[qt,t(G,{onClick:H,class:"text-none",color:"primary",density:"compact",variant:"tonal"},{default:a(()=>[i("Add Field")]),_:1})]),_:1})]),_:1}),t(b,null,{default:a(()=>[s.value.fields.length>0?(o(!0),f(X,{key:0},Y(s.value.fields,(c,y)=>(o(),$(k,{cols:"12",key:y},{default:a(()=>[t(fe,{modelValue:c.action,"onUpdate:modelValue":x=>c.action=x,items:p(V),"item-title":"actions",counter:"120","item-value":"actions",label:"Select an option or enter your action manually","append-inner-icon":"mdi-trash-can-outline",variant:"outlined",color:"primary",class:"mt-3",density:"compact",clearable:"",rules:[x=>!!(x!=null&&x.trim())||"Required",x=>x&&x.length<=120||"Please limit your input to 120 characters"],"onClick:appendInner":x=>ae(y)},{item:a(({item:x,props:d})=>[e("p",Se(d,{class:"pa-2 selecting_action"}),[t(w,null,{default:a(()=>[i("mdi-circle-medium")]),_:1}),i(" "+m(x.title),1)],16)]),_:2},1032,["modelValue","onUpdate:modelValue","items","rules","onClick:appendInner"])]),_:2},1024))),128)):(o(),$(k,{key:1},{default:a(()=>[It]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}),t(W,{density:"compact",class:"p-3 mt-4",elevation:"0"},{default:a(()=>[t(b,null,{default:a(()=>[t(k,{cols:"12"},{default:a(()=>{var c;return[t(b,null,{default:a(()=>[t(k,{class:"d-flex justify-content-between mb-3"},{default:a(()=>[Tt]),_:1})]),_:1}),e("div",At,[e("table",Pt,[Mt,((c=s.value.spareparts)==null?void 0:c.length)>0?(o(),f("tbody",Ft,[(o(!0),f(X,null,Y(s.value.spareparts,(y,x)=>(o(),f("tr",{key:x},[e("td",null,m(y.item_code),1),e("td",null,m(y.description),1),e("td",null,[t(F,{modelValue:y.qty,"onUpdate:modelValue":d=>y.qty=d,placeholder:"...",rules:[d=>!!(d!=null&&d.trim())||"required",d=>!isNaN(d)||"Mus tbe a number"],density:"compact",variant:"plain"},null,8,["modelValue","onUpdate:modelValue","rules"])]),e("td",null,[t(F,{modelValue:y.dr,"onUpdate:modelValue":d=>y.dr=d,placeholder:"...",rules:[d=>!!(d!=null&&d.trim())||"required",d=>!isNaN(d)||"Mus tbe a number"],density:"compact",variant:"plain"},null,8,["modelValue","onUpdate:modelValue","rules"])]),e("td",null,[t(F,{modelValue:y.si,"onUpdate:modelValue":d=>y.si=d,placeholder:"...",rules:[d=>!!(d!=null&&d.trim())||"required",d=>!isNaN(d)||"Mus tbe a number"],density:"compact",variant:"plain"},null,8,["modelValue","onUpdate:modelValue","rules"])]),e("td",null,[t(F,{modelValue:y.remarks,"onUpdate:modelValue":d=>y.remarks=d,placeholder:"Type here ...",variant:"plain"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,[t(w,{onClick:d=>te(x),class:"text-danger"},{default:a(()=>[i("mdi-trash-can-outline")]),_:2},1032,["onClick"])])]))),128))])):(o(),f("tbody",jt,[e("tr",null,[e("td",Ot,[t(w,{class:"mb-3",style:{"font-size":"30px",color:"grey"}},{default:a(()=>[i("mdi-file-document-alert-outline")]),_:1}),zt,i(" No records found ")])])]))])]),e("div",Et,[t(G,{color:"primary",size:"medium",flat:"",class:"text-none mt-3 p-2",onClick:l[4]||(l[4]=y=>n.value=!n.value)},{default:a(()=>[t(w,{class:"mr-3"},{default:a(()=>[i("mdi-database-cog")]),_:1}),i(" Select Item ")]),_:1}),t(he,{modelValue:n.value,"onUpdate:modelValue":l[7]||(l[7]=y=>n.value=y),width:q.value,class:"d-flex align-items-center justify-content-center","location-strategy":"connected"},{default:a(()=>[t(W,{class:"pa-7","min-height":"500",width:"700"},{default:a(()=>[t(b,null,{default:a(()=>[t(k,{cols:"4"},{default:a(()=>[t(F,{modelValue:N.search,"onUpdate:modelValue":l[5]||(l[5]=y=>N.search=y),clearable:"",density:"compact",label:"Search all fields",variant:"outlined",color:"primary"},null,8,["modelValue"])]),_:1}),t(ve),t(G,{onClick:l[6]||(l[6]=y=>n.value=!1),icon:"",variant:"plain",color:"primary"},{default:a(()=>[t(w,null,{default:a(()=>[i("mdi-close")]),_:1})]),_:1})]),_:1}),t(p(me),{ref_key:"datatable",ref:r,rows:L.value,columns:p(ee),loading:g.value,selectRowOnClick:!0,sortable:!0,search:N.search,isServerMode:!0,totalRows:R.value,pageSize:N.pagesize,hide:!0,filter:!0,skin:"bh-table-compact bh-table-bordered bh-table-responsive",class:"",onRowClick:se,onChange:h},null,8,["rows","columns","loading","search","totalRows","pageSize"]),t(ye),e("p",Jt,[Lt,Bt,s.value.spareparts.length>0?(o(),f("span",Ht,[(o(!0),f(X,null,Y(s.value.spareparts,(y,x)=>(o(),f("span",{key:y.id},[i(" [ "+m(y.item_code)+" - ",1),t(w,{onClick:d=>te(x),class:"text-danger"},{default:a(()=>[i("mdi-trash-can-outline")]),_:2},1032,["onClick"]),i("]   ")]))),128))])):(o(),f("span",Qt,"No data selected"))])]),_:1})]),_:1},8,["modelValue","width"])])]}),_:1})]),_:1})]),_:1}),p(P)===p(ie)||p(P)===p(de)?(o(),$(W,{key:0,density:"compact",class:"p-3 mt-4",elevation:"0"},{default:a(()=>[t(b,null,{default:a(()=>[t(k,{class:"d-flex justify-content-between"},{default:a(()=>[Wt]),_:1})]),_:1}),t(b,null,{default:a(()=>[t(k,{cols:"12",md:"6",sm:"6"},{default:a(()=>[t(F,{modelValue:s.value.name,"onUpdate:modelValue":l[8]||(l[8]=c=>s.value.name=c),color:"primary",placeholder:"Name",rules:[c=>!!(c!=null&&c.trim())||"required"],density:"compact",variant:"outlined"},null,8,["modelValue","rules"])]),_:1}),t(k,{cols:"12",md:"6",sm:"6"},{default:a(()=>[t(F,{modelValue:s.value.designation,"onUpdate:modelValue":l[9]||(l[9]=c=>s.value.designation=c),color:"primary",placeholder:"Designation",rules:[c=>!!(c!=null&&c.trim())||"required"],density:"compact",variant:"outlined"},null,8,["modelValue","rules"])]),_:1})]),_:1}),t(b,null,{default:a(()=>[t(k,{cols:"12"},{default:a(()=>[t(b,{class:"mb-1"},{default:a(()=>[t(k,{cols:"12",class:"d-flex justify-space-between"},{default:a(()=>[e("p",Gt,[i("Signature Pad "),[null,void 0].includes(s.value.signature)?j("",!0):(o(),f("span",Kt,"Signature successfully saved."))]),e("div",null,[t(G,{onClick:z,color:"primary",density:"compact",variant:"flat",class:"mr-2"},{default:a(()=>[i("Save")]),_:1}),t(G,{onClick:v,color:"primary",density:"compact",variant:"tonal"},{default:a(()=>[i("Retry")]),_:1})])]),_:1})]),_:1}),t(ge,{ref_key:"signaturePad",ref:M,height:"200px",style:{border:"1px solid lightgrey"}},null,512),Xt]),_:1})]),_:1})]),_:1})):j("",!0)]),_:1},512)}}};export{la as _,ta as a,aa as b,wt as u};
