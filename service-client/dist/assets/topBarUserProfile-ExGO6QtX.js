import{a as j,g as E,u as D,aj as F,c as I,v as q,r as b,ak as H,aR as J,x as T,e as s,o as l,f as x,w as e,h as t,H as B,n as S,F as U,y as M,E as Y,j as d,t as c,k as A,m as C}from"./index-C8ph-EQq.js";import{l as P}from"./logout-D7B5usQQ.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G=[{name:"AdminDashboard",module:"Dashboard",icong:"mdi-tablet-dashboard"},{name:"hehehe",module:"Account Management",icong:"mdi-account-multiple",children:[{name:"RolesMain",module:"Roles & Permission",icong:"mdi-account-badge"},{name:"SSUDesignation",module:"Set SSU & Approver Designation",icong:"mdi-file-document-plus"},{name:"ApprovalConfiguration",module:"Aprover Config",icong:"mdi-checkbox-multiple-outline"}]},{name:"#",module:"Maintenance Settings",icong:"mdi-file-document",children:[{name:"PMSettings",module:"PM Settings",icong:"mdi-file-cog"},{name:"SetStandardActions",module:"Set Standard Actions",icong:"mdi-text-box-check-outline"},{name:"",module:"Client Contact",icong:"mdi-card-account-mail-outline"}]}],K={__name:"BaseSidebar",setup(N){const m=j(),_=E(),p=_.currentUserRole;_.permissions;const v=D();F(),P();const R=I();q();const g=b(p),n=b([]),f=b(!1),w=async()=>{v.push("/",{replace:!0}),_.setCurrentUserRole(g.value),m.buildAbility()};b(null);const V=H(()=>{const k={module:"Dashboard",create:!0,read:!0,edit:!0,delete:!0,approve:!0,delegate:!0,installer:!0,report:!1,name:"dashboard",icong:"mdi-view-dashboard-variant"},a=n.value.find(o=>_.currentUserRole===o.role_id),h=[k];if(a){const o=JSON.parse(a==null?void 0:a.permissions),u=(o==null?void 0:o.filter(r=>r.read))||[];return a.role_id===J?[...G]:[...h,...u]}});return T(()=>{n.value.push(...R.user.user_roles),f.value=n.value.length!==1}),(k,a)=>{const h=s("v-select"),o=s("v-list-item"),u=s("v-icon"),r=s("v-list-item-title"),L=s("v-list-group"),O=s("v-list");return l(),x(O,{dense:""},{default:e(()=>[t(o,null,{default:e(()=>[f.value?(l(),x(h,{key:0,modelValue:g.value,"onUpdate:modelValue":[a[0]||(a[0]=i=>g.value=i),w],class:"mt-3 mb-3",transition:"fab-transition",items:n.value,"item-title":"role_name","item-value":"role_id",density:"compact",variant:"outlined",label:"Switch Account","append-inner-icon":"mdi-account-outline"},null,8,["modelValue","items"])):B("",!0)]),_:1}),n.value.length>0?(l(!0),S(U,{key:0},M(V.value,(i,te)=>(l(),S(U,null,[i.children?(l(),x(L,{key:0},{activator:e(({props:y})=>[t(o,Y({color:"primary"},y),{prepend:e(()=>[t(u,{class:"myIcon"},{default:e(()=>[d(c(i.icong),1)]),_:2},1024)]),default:e(()=>[t(r,{color:"primary"},{default:e(()=>[d(c(i.module),1)]),_:2},1024)]),_:2},1040)]),default:e(()=>[(l(!0),S(U,null,M(i.children,(y,$)=>(l(),x(o,{key:$,to:{name:y.name},link:""},{prepend:e(()=>[t(u,{class:"myIcon"},{default:e(()=>[d(c(y.icong),1)]),_:2},1024)]),default:e(()=>[t(r,null,{default:e(()=>[d(c(y.module),1)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1024)):(l(),x(o,{key:1,to:{name:i.name},link:""},{prepend:e(()=>[t(u,{class:"myIcon"},{default:e(()=>[d(c(i.icong),1)]),_:2},1024)]),default:e(()=>[t(r,null,{default:e(()=>[d(c(i.module),1)]),_:2},1024)]),_:2},1032,["to"]))],64))),256)):B("",!0)]),_:1})}}},le=z(K,[["__scopeId","data-v-cae00715"]]),Q={class:"text-right pa-4"},W={class:"text-dark"},X=A("br",null,null,-1),Z={key:0,class:"small mr-4"},ee={class:"text-dark"},se={__name:"topBarUserProfile",setup(N){const m=I(),_=P();D();const p=b(!1),v=b(!1),R=async()=>{p.value=!0;try{await _.log_me_out(),window.location.href="/",p.value=!1}catch(g){alert(g)}finally{p.value=!1}};return(g,n)=>{var a,h,o,u;const f=s("v-btn"),w=s("v-spacer"),V=s("v-card"),k=s("v-dialog");return l(),S("div",Q,[t(f,{onClick:n[0]||(n[0]=r=>v.value=!0),color:"primary",class:"text-none","prepend-icon":"mdi-account"},{default:e(()=>[A("span",W,[A("b",null,c(C(m).user.first_name)+" "+c(C(m).user.last_name),1)]),d(" | Logout ")]),_:1}),X,((o=(h=(a=C(m))==null?void 0:a.user)==null?void 0:h.user_roles)==null?void 0:o.length)===1?(l(),S("span",Z,[d("Logged in as : "),A("b",ee,c((u=C(m).user.user_roles[0])==null?void 0:u.role_name),1)])):B("",!0),t(k,{modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]=r=>v.value=r),width:"auto"},{default:e(()=>[t(V,{"min-width":"300","prepend-icon":"mdi-account",text:"Are you sure you want to leave?",title:"Logout"},{actions:e(()=>[t(w),t(f,{class:"text-none",variant:"tonal",color:"primary",text:"Cancel",onClick:n[1]||(n[1]=r=>v.value=!1)}),t(f,{class:"text-none",color:"primary","min-width":"150px",variant:"flat",text:"Yes",loading:p.value,onClick:R},null,8,["loading"])]),_:1})]),_:1},8,["modelValue"])])}}};export{le as B,se as _};
